(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1814"],{"/SU5":function(t,e,i){"use strict";i.d(e,"c",function(){return a}),i.d(e,"b",function(){return o}),i.d(e,"a",function(){return n}),i.d(e,"d",function(){return s});var r=i("t3Un");function a(t){return Object(r.a)({url:"/deliverycity/list",method:"get",params:t})}function o(t){return Object(r.a)({url:"/deliverycity/"+t,method:"get"})}function n(t){return Object(r.a)({url:"/deliverycity/",method:"post",data:t})}function s(t,e){return Object(r.a)({url:"/deliverycity/update/"+t,method:"put",data:e})}},"4pWb":function(t,e,i){},Efqt:function(t,e,i){"use strict";var r=i("P2sY"),a=i.n(r),o=i("glbJ"),n=i("fL+G"),s=i("Grqa"),c=i("uARZ"),u=i("Yfch"),l=i("/SU5"),d=i("gg54"),m={city:"",zip_code:"",active:!1},p={name:"DeliveryCityDetail",components:{Tinymce:o.a,MDinput:s.a,Upload:n.a,Sticky:c.a},props:{isEdit:{type:Boolean,default:!1}},data:function(){var t=this,e=function(e,i,r){""===i?(t.$message({message:e.field+"为必传项",typlengthe:"error"}),r(new Error(e.field+"为必传项"))):r()};return{postForm:a()({},m),loading:!1,userListOptions:[],rules:{image_uri:[{validator:e}],title:[{validator:e}],content:[{validator:e}],source_uri:[{validator:function(e,i,r){i?Object(u.b)(i)?r():(t.$message({message:"外链url填写不正确",type:"error"}),r(new Error("外链url填写不正确"))):r()},trigger:"blur"}]},tempRoute:{}}},computed:{lang:function(){return this.$store.getters.language}},created:function(){if(this.isEdit){var t=this.$route.params&&this.$route.params.id;this.fetchData(t)}else this.postForm=a()({},m);this.tempRoute=a()({},this.$route)},methods:{fetchData:function(t){var e=this;Object(l.b)(t).then(function(t){e.postForm=t.data}).catch(function(t){console.log(t)})},submitForm:function(){var t=this;this.$refs.postForm.validate(function(e){if(!e)return console.log("error submit!!"),!1;t.$route.params.id?Object(l.d)(t.$route.params.id,t.postForm).then(function(e){t.loading=!0;var i="成功",r="发布文章成功",a="success";-1===e.data.code&&(a="error",i="failed",r="save failed"),t.$notify({title:i,message:r,type:a,duration:2e3}),t.loading=!1},function(){t.$notify({title:"failed",message:"save failed",type:"error",duration:2e3})}):Object(l.a)(t.postForm).then(function(e){t.loading=!0;var i="成功",r="发布文章成功",a="success";-1===e.data.code&&(a="error",i="failed",r="save failed"),t.$notify({title:i,message:r,type:a,duration:2e3}),t.loading=!1,t.$router.push("/deliveryCity/list")},function(){t.$notify({title:"failed",message:"save failed",type:"error",duration:2e3})})})},draftForm:function(){0!==this.postForm.content.length&&0!==this.postForm.title.length?(this.$message({message:"保存成功",type:"success",showClose:!0,duration:1e3}),this.postForm.status="draft"):this.$message({message:"请填写必要的标题和内容",type:"warning"})},getRemoteUserList:function(t){var e=this;Object(d.a)(t).then(function(t){t.data.items&&(e.userListOptions=t.data.items.map(function(t){return t.name}))})}}},f=(i("svnD"),i("KHd+")),v=Object(f.a)(p,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"createPost-container"},[i("el-form",{ref:"postForm",staticClass:"form-container",attrs:{model:t.postForm,rules:t.rules}},[i("sticky",{attrs:{"class-name":"sub-navbar "+t.postForm.status}},[i("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{"margin-left":"10px"},attrs:{type:"success"},on:{click:t.submitForm}},[t._v("发布\n      ")])],1),t._v(" "),i("div",{staticClass:"createPost-main-container"},[i("el-row",[i("el-col",{attrs:{span:24}},[i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:t.$t("city"),"label-width":"80px"}},[i("el-input",{attrs:{type:"text",autosize:"",placeholder:"city"},model:{value:t.postForm.city,callback:function(e){t.$set(t.postForm,"city",e)},expression:"postForm.city"}})],1)],1)],1),t._v(" "),i("div",{staticClass:"postInfo-container"},[i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:t.$t("zipcode"),"label-width":"80px"}},[i("el-input",{attrs:{type:"text",autosize:"",placeholder:"zipcode"},model:{value:t.postForm.zip_code,callback:function(e){t.$set(t.postForm,"zip_code",e)},expression:"postForm.zip_code"}})],1)],1)],1),t._v(" "),i("el-form-item",{staticStyle:{"margin-bottom":"10px"},attrs:{label:t.$t("active"),"label-width":"85px"}},[i("div",{staticClass:"box-item"},[i("el-switch",{model:{value:t.postForm.active,callback:function(e){t.$set(t.postForm,"active",e)},expression:"postForm.active"}})],1)])],1)],1)],1)],1)],1)],1)},[],!1,null,"63564a36",null);v.options.__file="DeliveryCityDetail.vue";e.a=v.exports},MSNs:function(t,e,i){"use strict";i.d(e,"a",function(){return a});var r=i("t3Un");function a(){return Object(r.a)({url:"/qiniu/upload/token",method:"get"})}},Yfch:function(t,e,i){"use strict";function r(t){return["admin"].indexOf(t.trim())>=0}function a(t){return/^(https?|ftp):\/\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(\/($|[a-zA-Z0-9.,?'\\+&%$#=~_-]+))*$/.test(t)}i.d(e,"a",function(){return r}),i.d(e,"b",function(){return a})},gg54:function(t,e,i){"use strict";i.d(e,"a",function(){return a});var r=i("t3Un");function a(t){return Object(r.a)({url:"/search/user",method:"get",params:{name:t}})}},rFPX:function(t,e,i){"use strict";i.r(e);var r={name:"EditForm",components:{DeliveryCityDetail:i("Efqt").a}},a=i("KHd+"),o=Object(a.a)(r,function(){var t=this.$createElement;return(this._self._c||t)("delivery-city-detail",{attrs:{"is-edit":!0}})},[],!1,null,null,null);o.options.__file="edit.vue";e.default=o.exports},svnD:function(t,e,i){"use strict";var r=i("4pWb");i.n(r).a}}]);
//# sourceMappingURL=chunk-1814.c79afb0f.js.map