{"version":3,"sources":["webpack:///./src/views/promoCode/components/PromoCodeDetail.vue?d497","webpack:///src/views/promoCode/components/PromoCodeDetail.vue","webpack:///./src/views/promoCode/components/PromoCodeDetail.vue?3f2d","webpack:///./src/views/promoCode/components/PromoCodeDetail.vue","webpack:///./src/views/promoCode/create.vue?e65c","webpack:///./src/views/promoCode/create.vue?f398","webpack:///src/views/promoCode/create.vue","webpack:///./src/views/promoCode/create.vue","webpack:///./src/api/qiniu.js","webpack:///./src/api/page.js","webpack:///./src/utils/validate.js","webpack:///./src/api/remoteSearch.js","webpack:///./src/views/promoCode/components/PromoCodeDetail.vue?d9b8"],"names":["defaultForm","_id","code","type","value","active","min_consomm","begin_date","end_date","components_PromoCodeDetailvue_type_script_lang_js_","name","components","Tinymce","MDinput","Upload","singleImage3","Sticky","props","isEdit","Boolean","default","data","_this","this","validateRequire","rule","callback","$message","message","field","typlengthe","Error","postForm","assign_default","loading","userListOptions","rules","image_uri","validator","title","content","source_uri","Object","validate","trigger","tempRoute","computed","lang","$store","getters","language","created","id","$route","params","fetchData","methods","_this2","page","then","response","setTagsViewTitle","catch","err","console","log","route","dispatch","submitForm","_this3","$refs","valid","res","massageTitle","massageType","$notify","duration","$router","push","draftForm","length","showClose","status","getRemoteUserList","query","_this4","remoteSearch","items","map","v","component","componentNormalizer","_vm","_h","$createElement","_c","_self","staticClass","ref","attrs","model","class-name","directives","rawName","expression","staticStyle","margin-left","on","click","_v","span","label","$t","label-width","autosize","placeholder","$$v","$set","options","__file","__webpack_exports__","promoCode_createvue_type_script_lang_js_","PromoCodeDetail","is-edit","__webpack_require__","d","getToken","_utils_request__WEBPACK_IMPORTED_MODULE_0__","request","url","method","fetchList","fetchPage","createPage","updatePage","isvalidUsername","str","indexOf","trim","validateURL","textval","test","userSearch","_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_11_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_11_2_node_modules_sass_loader_lib_loader_js_ref_11_3_node_modules_vue_loader_lib_index_js_vue_loader_options_PromoCodeDetail_vue_vue_type_style_index_0_id_cd2289a2_rel_stylesheet_2Fscss_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","n"],"mappings":"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","file":"js/chunk-695a.be7124a7.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"createPost-container\"},[_c('el-form',{ref:\"postForm\",staticClass:\"form-container\",attrs:{\"model\":_vm.postForm,\"rules\":_vm.rules}},[_c('sticky',{attrs:{\"class-name\":'sub-navbar '+_vm.postForm.status}},[_c('el-button',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"margin-left\":\"10px\"},attrs:{\"type\":\"success\"},on:{\"click\":_vm.submitForm}},[_vm._v(\"发布\\n      \")])],1),_vm._v(\" \"),_c('div',{staticClass:\"createPost-main-container\"},[_c('el-row',[_c('div',{staticClass:\"postInfo-container\"},[_c('el-row',[_c('el-col',{attrs:{\"span\":24}},[_c('el-form-item',{attrs:{\"label\":_vm.$t('promoCode.title'),\"label-width\":\"80px\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"autosize\":\"\",\"placeholder\":\"code\"},model:{value:(_vm.postForm.code),callback:function ($$v) {_vm.$set(_vm.postForm, \"code\", $$v)},expression:\"postForm.code\"}})],1)],1)],1),_vm._v(\" \"),_c('el-row',[_c('el-col',{attrs:{\"span\":24}},[_c('el-form-item',{attrs:{\"label\":_vm.$t('promoCode.type'),\"label-width\":\"80px\"}},[_c('el-input',{attrs:{\"placeholder\":_vm.$t('promoCode.type'),\"type\":\"text\"},model:{value:(_vm.postForm.type),callback:function ($$v) {_vm.$set(_vm.postForm, \"type\", $$v)},expression:\"postForm.type\"}})],1)],1)],1),_vm._v(\" \"),_c('el-row',[_c('el-col',{attrs:{\"span\":24}},[_c('el-form-item',{attrs:{\"label\":_vm.$t('promoCode.value'),\"label-width\":\"80px\"}},[_c('el-input-number',{attrs:{\"placeholder\":_vm.$t('promoCode.value')},model:{value:(_vm.postForm.value),callback:function ($$v) {_vm.$set(_vm.postForm, \"value\", $$v)},expression:\"postForm.value\"}})],1)],1)],1),_vm._v(\" \"),_c('el-row',[_c('el-col',{attrs:{\"span\":24}},[_c('el-form-item',{attrs:{\"label\":_vm.$t('promoCode.min_consomm'),\"label-width\":\"80px\"}},[_c('el-input-number',{attrs:{\"placeholder\":_vm.$t('promoCode.min_consomm')},model:{value:(_vm.postForm.min_consomm),callback:function ($$v) {_vm.$set(_vm.postForm, \"min_consomm\", $$v)},expression:\"postForm.min_consomm\"}})],1)],1)],1),_vm._v(\" \"),_c('el-row',[_c('el-col',{attrs:{\"span\":24}},[_c('el-form-item',{attrs:{\"label\":_vm.$t('promoCode.begin_date'),\"label-width\":\"80px\"}},[_c('el-date-picker',{attrs:{\"placeholder\":_vm.$t('promoCode.begin_date'),\"type\":\"date\"},model:{value:(_vm.postForm.begin_date),callback:function ($$v) {_vm.$set(_vm.postForm, \"begin_date\", $$v)},expression:\"postForm.begin_date\"}})],1)],1)],1),_vm._v(\" \"),_c('el-row',[_c('el-col',{attrs:{\"span\":24}},[_c('el-form-item',{attrs:{\"label\":_vm.$t('promoCode.end_date'),\"label-width\":\"80px\"}},[_c('el-date-picker',{attrs:{\"placeholder\":_vm.$t('promoCode.end_date'),\"type\":\"date\"},model:{value:(_vm.postForm.end_date),callback:function ($$v) {_vm.$set(_vm.postForm, \"end_date\", $$v)},expression:\"postForm.end_date\"}})],1)],1)],1)],1)])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"createPost-container\">\n    <el-form ref=\"postForm\" :model=\"postForm\" :rules=\"rules\" class=\"form-container\">\n\n      <sticky :class-name=\"'sub-navbar '+postForm.status\">\n        <el-button v-loading=\"loading\" style=\"margin-left: 10px;\" type=\"success\" @click=\"submitForm\">发布\n        </el-button>\n      </sticky>\n\n      <div class=\"createPost-main-container\">\n        <el-row>\n\n          <div class=\"postInfo-container\">\n            <el-row>\n              <el-col :span=\"24\">\n                <el-form-item :label=\"$t('promoCode.title')\" label-width=\"80px\"  >\n                  <el-input v-model=\"postForm.code\" type=\"text\"  autosize placeholder=\"code\"/>\n                </el-form-item>\n              </el-col>\n            </el-row>\n\n            <el-row>\n              <el-col :span=\"24\">\n                <el-form-item :label=\"$t('promoCode.type')\" label-width=\"80px\">\n                  <el-input v-model=\"postForm.type\" :placeholder=\"$t('promoCode.type')\" type=\"text\"/>\n                </el-form-item>\n              </el-col>\n            </el-row>\n\n            <el-row>\n              <el-col :span=\"24\">\n                <el-form-item :label=\"$t('promoCode.value')\"  label-width=\"80px\">\n                  <el-input-number v-model=\"postForm.value\" :placeholder=\"$t('promoCode.value')\"/>\n                </el-form-item>\n              </el-col>\n            </el-row>\n\n            <el-row>\n              <el-col :span=\"24\">\n                <el-form-item :label=\"$t('promoCode.min_consomm')\" label-width=\"80px\">\n                  <el-input-number v-model=\"postForm.min_consomm\" :placeholder=\"$t('promoCode.min_consomm')\"/>\n                </el-form-item>\n              </el-col>\n            </el-row>\n\n            <el-row>\n              <el-col :span=\"24\">\n                <el-form-item :label=\"$t('promoCode.begin_date')\" label-width=\"80px\">\n                  <el-date-picker :placeholder=\"$t('promoCode.begin_date')\"\n                    type=\"date\"\n                    v-model=\"postForm.begin_date\">\n                  </el-date-picker>\n                </el-form-item>\n              </el-col>\n            </el-row>\n\n            <el-row>\n              <el-col :span=\"24\">\n                <el-form-item :label=\"$t('promoCode.end_date')\" label-width=\"80px\">\n                  <el-date-picker :placeholder=\"$t('promoCode.end_date')\"\n                    v-model=\"postForm.end_date\"\n                    type=\"date\" >\n                  </el-date-picker>\n                </el-form-item>\n              </el-col>\n            </el-row>\n          </div>\n\n        </el-row>\n\n      </div>\n    </el-form>\n\n  </div>\n</template>\n\n<script>\nimport Tinymce from '@/components/Tinymce'\nimport Upload from '@/components/Upload/singleImage3'\nimport MDinput from '@/components/MDinput'\nimport Sticky from '@/components/Sticky' // 粘性header组件\nimport { validateURL } from '@/utils/validate'\nimport { fetchPage, updatePage, createPage } from '@/api/page'\nimport { userSearch } from '@/api/remoteSearch'\n\nconst defaultForm = {\n  _id: \"\",\n  code: \"\",\n  type: \"\" ,\n  value: \"\" ,\n  active: \"\" ,\n  min_consomm: \"\",\n  begin_date: \"\",\n  end_date: \"\"\n}\n\nexport default {\n  name: 'PromoCodeDetail',\n  components: { Tinymce, MDinput, Upload, Sticky},\n  props: {\n    isEdit: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data() {\n    const validateRequire = (rule, value, callback) => {\n      if (value === '') {\n        this.$message({\n          message: rule.field + '为必传项',\n          typlengthe: 'error'\n        })\n        callback(new Error(rule.field + '为必传项'))\n      } else {\n        callback()\n      }\n    }\n    const validateSourceUri = (rule, value, callback) => {\n      if (value) {\n        if (validateURL(value)) {\n          callback()\n        } else {\n          this.$message({\n            message: '外链url填写不正确',\n            type: 'error'\n          })\n          callback(new Error('外链url填写不正确'))\n        }\n      } else {\n        callback()\n      }\n    }\n    return {\n      postForm: Object.assign({}, defaultForm),\n      loading: false,\n      userListOptions: [],\n      rules: {\n        image_uri: [{ validator: validateRequire }],\n        title: [{ validator: validateRequire }],\n        content: [{ validator: validateRequire }],\n        source_uri: [{ validator: validateSourceUri, trigger: 'blur' }]\n      },\n      tempRoute: {}\n    }\n  },\n  computed: {\n    lang() {\n      return this.$store.getters.language\n    }\n  },\n  created() {\n    if (this.isEdit) {\n      const id = this.$route.params && this.$route.params.id\n      this.fetchData(id)\n    } else {\n      this.postForm = Object.assign({}, defaultForm)\n    }\n\n    // Why need to make a copy of this.$route here?\n    // Because if you enter this page and quickly switch tag, may be in the execution of the setTagsViewTitle function, this.$route is no longer pointing to the current page\n    // https://github.com/PanJiaChen/vue-element-admin/issues/1221\n    this.tempRoute = Object.assign({}, this.$route)\n  },\n  methods: {\n    fetchData(id) {\n      fetchPage(id).then(response => {\n        this.postForm = response.data\n\n        // Set tagsview title\n        this.setTagsViewTitle()\n      }).catch(err => {\n        console.log(err)\n      })\n    },\n    setTagsViewTitle() {\n      const title = this.lang === 'zh' ? '编辑文章' : 'Edit Article'\n      const route = Object.assign({}, this.tempRoute, { title: `${title}-${this.postForm.id}` })\n      this.$store.dispatch('updateVisitedView', route)\n    },\n    submitForm() {\n      this.$refs.postForm.validate(valid => {\n        if (valid) {\n          if (this.$route.params.id) {\n            updatePage(this.$route.params.id, this.postForm).then(\n              (res) => {\n                this.loading = true\n                let massageTitle = '成功'\n                let message = '发布文章成功'\n                let massageType = 'success'\n                if (res.data.code === -1) {\n                  massageType = 'error'\n                  massageTitle = 'failed'\n                  message = 'save failed'\n                }\n                this.$notify({\n                  title: massageTitle,\n                  message: message,\n                  type: massageType,\n                  duration: 2000\n                })\n                this.loading = false\n              },\n              () => {\n                this.$notify({\n                  title: 'failed',\n                  message: 'save failed',\n                  type: 'error',\n                  duration: 2000\n                })\n              }\n            );\n          } else {\n            createPage(this.postForm).then(\n              (res) => {\n                this.loading = true\n                let massageTitle = '成功'\n                let message = '发布文章成功'\n                let massageType = 'success'\n                if (res.data.code === -1) {\n                  massageType = 'error'\n                  massageTitle = 'failed'\n                  message = 'save failed'\n                }\n                this.$notify({\n                  title: massageTitle,\n                  message: message,\n                  type: massageType,\n                  duration: 2000\n                })\n                this.loading = false\n                this.$router.push('/promoCode/list')\n              },\n              () => {\n                this.$notify({\n                  title: 'failed',\n                  message: 'save failed',\n                  type: 'error',\n                  duration: 2000\n                })\n              }\n            );\n          }\n\n\n        } else {\n          console.log('error submit!!')\n          return false\n        }\n      })\n    },\n    draftForm() {\n      if (this.postForm.content.length === 0 || this.postForm.title.length === 0) {\n        this.$message({\n          message: '请填写必要的标题和内容',\n          type: 'warning'\n        })\n        return\n      }\n      this.$message({\n        message: '保存成功',\n        type: 'success',\n        showClose: true,\n        duration: 1000\n      })\n      this.postForm.status = 'draft'\n    },\n    getRemoteUserList(query) {\n      userSearch(query).then(response => {\n        if (!response.data.items) return\n        this.userListOptions = response.data.items.map(v => v.name)\n      })\n    }\n  }\n}\n</script>\n\n<style rel=\"stylesheet/scss\" lang=\"scss\" scoped>\n@import \"~@/styles/mixin.scss\";\n.createPost-container {\n  position: relative;\n  .createPost-main-container {\n    padding: 40px 45px 20px 50px;\n    .postInfo-container {\n      position: relative;\n      @include clearfix;\n      margin-bottom: 10px;\n      .postInfo-container-item {\n        float: left;\n      }\n    }\n    .editor-container {\n      min-height: 500px;\n      margin: 0 0 30px;\n      .editor-upload-btn-container {\n        text-align: right;\n        margin-right: 10px;\n        .editor-upload-btn {\n          display: inline-block;\n        }\n      }\n    }\n  }\n  .word-counter {\n    width: 40px;\n    position: absolute;\n    right: -10px;\n    top: 0px;\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js?cacheDirectory!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PromoCodeDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js?cacheDirectory!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PromoCodeDetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PromoCodeDetail.vue?vue&type=template&id=cd2289a2&scoped=true&\"\nimport script from \"./PromoCodeDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./PromoCodeDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PromoCodeDetail.vue?vue&type=style&index=0&id=cd2289a2&rel=stylesheet%2Fscss&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"cd2289a2\",\n  null\n  \n)\n\ncomponent.options.__file = \"PromoCodeDetail.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('promo-code-detail',{attrs:{\"is-edit\":false}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/babel-loader/lib/index.js?cacheDirectory!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./create.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js?cacheDirectory!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./create.vue?vue&type=script&lang=js&\"","<template>\n  <promo-code-detail :is-edit=\"false\"/>\n</template>\n\n<script>\nimport PromoCodeDetail from './components/PromoCodeDetail'\n\nexport default {\n  name: 'CreateForm',\n  components: { PromoCodeDetail }\n}\n</script>\n\n","import { render, staticRenderFns } from \"./create.vue?vue&type=template&id=c48def4c&\"\nimport script from \"./create.vue?vue&type=script&lang=js&\"\nexport * from \"./create.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"create.vue\"\nexport default component.exports","import request from '@/utils/request'\n\nexport function getToken() {\n  return request({\n    url: '/qiniu/upload/token', // 假地址 自行替换\n    method: 'get'\n  })\n}\n","import request from '@/utils/request'\n\nexport function fetchList(query) {\n  return request({\n    url: '/pages/list',\n    method: 'get',\n    params: query\n  })\n}\n\nexport function fetchPage(id) {\n  return request({\n    url: '/pages/'+id,\n    method: 'get',\n  })\n}\n\nexport function createPage(data) {\n  return request({\n    url: '/pages/',\n    method: 'post',\n    data\n  })\n}\n\nexport function updatePage(id, data) {\n  return request({\n    url: '/pages/update/'+id,\n    method: 'put',\n    data\n  })\n}\n","/**\n * Created by jiachenpan on 16/11/18.\n */\n\nexport function isvalidUsername(str) {\n  const valid_map = ['admin']\n  return valid_map.indexOf(str.trim()) >= 0\n}\n\n/* 合法uri*/\nexport function validateURL(textval) {\n  const urlregex = /^(https?|ftp):\\/\\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]?)(\\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|([a-zA-Z0-9-]+\\.)*[a-zA-Z0-9-]+\\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(\\/($|[a-zA-Z0-9.,?'\\\\+&%$#=~_-]+))*$/\n  return urlregex.test(textval)\n}\n\n/* 小写字母*/\nexport function validateLowerCase(str) {\n  const reg = /^[a-z]+$/\n  return reg.test(str)\n}\n\n/* 大写字母*/\nexport function validateUpperCase(str) {\n  const reg = /^[A-Z]+$/\n  return reg.test(str)\n}\n\n/* 大小写字母*/\nexport function validateAlphabets(str) {\n  const reg = /^[A-Za-z]+$/\n  return reg.test(str)\n}\n\n/**\n * validate email\n * @param email\n * @returns {boolean}\n */\nexport function validateEmail(email) {\n  const re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\n  return re.test(email)\n}\n","import request from '@/utils/request'\n\nexport function userSearch(name) {\n  return request({\n    url: '/search/user',\n    method: 'get',\n    params: { name }\n  })\n}\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/index.js??ref--11-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib/index.js??ref--11-2!../../../../node_modules/sass-loader/lib/loader.js??ref--11-3!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PromoCodeDetail.vue?vue&type=style&index=0&id=cd2289a2&rel=stylesheet%2Fscss&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/index.js??ref--11-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib/index.js??ref--11-2!../../../../node_modules/sass-loader/lib/loader.js??ref--11-3!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PromoCodeDetail.vue?vue&type=style&index=0&id=cd2289a2&rel=stylesheet%2Fscss&lang=scss&scoped=true&\""],"sourceRoot":""}